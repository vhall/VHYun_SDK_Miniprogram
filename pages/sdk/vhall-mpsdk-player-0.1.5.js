!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var i=e();for(var r in i)("object"==typeof exports?exports:t)[r]=i[r]}}(window,(function(){return function(t){var e={};function i(r){if(e[r])return e[r].exports;var s=e[r]={i:r,l:!1,exports:{}};return t[r].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(r,s,function(e){return t[e]}.bind(null,s));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);var r=(()=>{let t,e;const i=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"],r=[];for(let t=0;t<i.length;t+=1)r[i[t]]=t;const s=i=>{t=i,e=0},a=()=>{if(!t)return-1;if(e>=t.length)return-1;const i=255&t.charCodeAt(e);return e+=1,i},o=()=>{if(!t)return-1;for(;;){if(e>=t.length)return-1;const i=t.charAt(e);if(e+=1,r[i])return r[i];if("A"===i)return 0}},n=t=>{let e=t.toString(16);return 1===e.length&&(e=`0${e}`),e=`%${e}`,unescape(e)};return{encodeBase64:t=>{let e,r,o;s(t),e="";const n=new Array(3);for(r=0,o=!1;!o&&-1!==(n[0]=a());)n[1]=a(),n[2]=a(),e+=i[n[0]>>2],-1!==n[1]?(e+=i[n[0]<<4&48|n[1]>>4],-1!==n[2]?(e+=i[n[1]<<2&60|n[2]>>6],e+=i[63&n[2]]):(e=`${e+=i[n[1]<<2&60]}=`,o=!0)):(e=`${e=`${e+=i[n[0]<<4&48]}=`}=`,o=!0),(r+=4)>=76&&(e=`${e}\n`,r=0);return e},decodeBase64:t=>{let e,i;s(t),e="";const r=new Array(4);for(i=!1;!i&&-1!==(r[0]=o())&&-1!==(r[1]=o());)r[2]=o(),r[3]=o(),e+=n(r[0]<<2&255|r[1]>>4),-1!==r[2]?(e+=n(r[1]<<4&255|r[2]>>2),-1!==r[3]?e+=n(r[2]<<6&255|r[3]):i=!0):i=!0;return e}}})();const s=(()=>{let t,e="";t=t=>{console.log(...t)};return{DEBUG:0,TRACE:1,INFO:2,WARNING:3,ERROR:4,NONE:5,setLogLevel:t=>{let e=t;t>s.NONE?e=s.NONE:t<s.DEBUG&&(e=s.DEBUG),s.logLevel=e},setOutputFunction:e=>{t=e},setLogPrefix:t=>{e=t},log:(i,...r)=>{let a=e;if(i<s.logLevel)return;i===s.DEBUG?a=`${a}DEBUG`:i===s.TRACE?a=`${a}TRACE`:i===s.INFO?a=`${a}INFO`:i===s.WARNING?a=`${a}WARNING`:i===s.ERROR&&(a=`${a}ERROR`);const o=[a=`${a}: `].concat(r);if(void 0!==s.panel){let t="";for(let e=0;e<o.length;e+=1)t+=o[e];s.panel.value=`${s.panel.value}\n${t}`}else t.apply(s,[o])},debug:(...t)=>{s.log(s.DEBUG,...t)},trace:(...t)=>{s.log(s.TRACE,...t)},info:(...t)=>{s.log(s.INFO,...t)},warning:(...t)=>{s.log(s.WARNING,...t)},error:(...t)=>{s.log(s.ERROR,...t)}}})();var a=s;class o{constructor(){this.sessionId=o.random(),this.prefixK="10",this.message="",this.monitor_api="/monitor",this.playHeart=null,this.playMessage=null,this.biz_des02=2,this.pf="9",this.ver="0.1.5",this.date="2019-09-12",this.inited=!1,this.backlog=[],this.browerUA="miniprogram"}init(t){this.url=t.url?t.url:"https://t-dc.e.vhall.com/login",this.biz_role=t.biz_role?t.biz_role:"",this.biz_id=t.biz_id?t.biz_id:"",this.biz_des01=t.biz_des01?t.biz_des01:"",this.bu=t.bu?t.bu:0,this.uid=t.uid,this.aid=t.aid,this.vid=t.vid,this.app_id=t.app_id,this.inited=!0;let e=this.url.split("/").length>=3?this.url.split("/")[2]:"t-dc.e.vhall.com";this.monitor_url=`https://${e}${this.monitor_api}`,this.cleanBacklog()}static random(){const t=[1,2,3,4,5,6,7,8,9];return(new Date).valueOf()+String(t[Math.floor(Math.random()*t.length)])+String(t[Math.floor(Math.random()*t.length)])+String(t[Math.floor(Math.random()*t.length)])}push(t){wx.request({url:t,method:"GET",success:t=>{},fail:t=>{console.error(`uplog failed!! ${t}`)}})}cleanBacklog(){this.backlog.forEach(t=>{this.report(t.msg,{k:t.k,level:t.level,streamId:t.streamId,Collapsed:t.Collapsed})}),this.backlog=[]}info(t="",{k:e="000",streamId:i="",Collapsed:r=""}={}){this.report(t,{k:e,streamId:i,Collapsed:r})}json2base64(t){return r.encodeBase64(JSON.stringify(t).replace(/\s+/g,"")).replace(/\s+/g,"")}error(t="",{k:e="000",streamId:i="",Collapsed:r=""}={}){this.report(t,{k:e,level:"error",streamId:i,Collapsed:r})}report(t="",{k:e="000",level:i="info",streamId:r="",Collapsed:s=""}={}){if(!this.inited)return void this.backlog.push({msg:t,k:e,level:i,streamId:r,Collapsed:s});let n="2";if(t&&"error"===i?(a.error(`${r} | ${t}`,s),n="4"):a.info(`${r}  | ${t}`,s),"000"===e)return;let l=t;s&&(l=`${t} ${JSON.stringify(s)}`);const c={s:this.sessionId,ld:Date.now(),uid:this.uid,aid:this.aid,pf:this.pf,ver:this.ver,bu:this.bu,_m:l,p:r},h=o.random(),d=this.json2base64(c),u=`${this.monitor_url}?k=${this.prefixK}${n}${e}&id=${h}&s=${this.sessionId}&bu=${this.bu}&token=${d}`;this.push(u)}startPlayLog(t){if(!this.inited)return;const e=o.random();let i,r={s:this.sessionId,uid:this.uid,aid:this.aid,pf:this.pf,ver:this.ver,bu:this.bu,vid:this.vid,app_id:this.app_id,_m:this.message};if("live"===t.args.type)i=102001,r.vtype="flv";else{if("vod"!==t.args.type)return void console.error("player Type error");i=92001,r.record_id=this.aid,r.vtype="hls"}const s=this.json2base64(r),a=`${this.url}?k=${i}&id=${e}&s=${this.sessionId}&bu=${this.bu}&token=${s}`;this.push(a)}pausePlayLog(t){if(!this.inited)return;if("vod"!==t.args.type)return void console.error("player Type error");const e=o.random();let i={s:this.sessionId,p:this.aid,uid:this.uid,aid:this.aid,record_id:this.aid,pf:this.pf,fd:t.currentPath,sd:t.currentHostname,ver:this.ver,bu:this.bu,vid:this.vid,app_id:this.app_id,_m:this.message};const r=this.json2base64(i),s=`${this.url}?k=92002&id=${e}&s=${this.sessionId}&bu=${this.bu}&token=${r}`;this.push(s)}playMessageLog(t){if(!this.inited)return;const e=o.random(),i={s:this.sessionId,uid:this.uid,aid:this.aid,_m:this.message,p:this.aid,pf:this.pf,ver:this.ver,errcode:2002,vtype:2,videoWidth:t.streamState.netStatus.videoWidth,videoHeight:t.streamState.netStatus.videoHeight,bitrate:parseInt(t.streamState.netStatus.videoBitrate+t.streamState.netStatus.audioBitrate,10),tf:30*(t.streamState.netStatus.videoBitrate+t.streamState.netStatus.audioBitrate)*1024/8,uf:0,biz_role:this.biz_role,biz_id:this.biz_id,biz_des01:this.biz_des01,biz_des02:this.biz_des02,bu:this.bu,vid:this.vid,vfid:this.vid,app_id:this.app_id,flow_type:2,picture_quality:t.currentQuality,os:!1};let r;if("live"===t.args.type)r=102002,i.protocol="flv",i.tt=3e4;else{if("vod"!==t.args.type)return void console.error("player Type error");r=92005,i.record_id=this.aid,i.fd=t.currentPath,i.sd=t.currentHostname,i.bc=0,i.bt=0,i.protocol="hls",i.tt=t.currentTime-t.messageTime,(i.tt<=0||i.tt>30)&&(i.tt=30),i.tt*=1e3,t.messageTime=t.currentTime}const s=this.json2base64(i),a=`${this.url}?k=${r}&id=${e}&s=${this.sessionId}&bu=${this.bu}&token=${s}`;this.push(a)}startPlayMessageLog(t){this.playMessage||(this.playMessage=setInterval(this.playMessageLog.bind(this),3e4,t))}stopPlayMessageLog(){this.playMessage&&(clearInterval(this.playMessage),this.playMessage=null)}heartbeatMessageLog(t){if(!this.inited)return;const e=o.random(),i={s:this.sessionId,tt:6e4,uid:this.uid,aid:this.aid,_m:this.message,p:this.aid,pf:this.pf,ver:this.ver,fd:t.currentPath,sd:t.currentHostname,ua:this.browerUA,vtype:2,tf:30*(t.streamState.netStatus.videoBitrate+t.streamState.netStatus.audioBitrate)*1024/8,bu:this.bu,vid:this.vid,vfid:this.vid,app_id:this.app_id};let r;if("live"===t.args.type)r=102003,i.tt=6e4;else{if("vod"!==t.args.type)return void console.error("player Type error");r=92003,i.record_id=this.aid,i.fd=t.currentPath,i.sd=t.currentHostname,i.picture_quality=t.currentQuality,i.protocol="hls",i.tt=t.currentTime-t.heartbeatTime,(i.tt<=0||i.tt>60)&&(i.tt=60),i.tt*=1e3,t.heartbeatTime=t.currentTime}const s=this.json2base64(i),a=`${this.url}?k=${r}&id=${e}&s=${this.sessionId}&bu=${this.bu}&token=${s}`;this.push(a)}startPlayHeartLog(t){this.playHeart||(this.playHeart=setInterval(this.heartbeatMessageLog.bind(this),6e4,t))}stopPlayHeartLog(){this.playHeart&&(clearInterval(this.playHeart),this.playHeart=null)}}var n=new o,l=function(){function t(){return new RegExp(/(.*?)\.?([^\.]*?)\.(gl|com|net|org|biz|ws|in|me|co\.uk|co|org\.uk|ltd\.uk|plc\.uk|me\.uk|edu|mil|br\.com|cn\.com|eu\.com|hu\.com|no\.com|qc\.com|sa\.com|se\.com|se\.net|us\.com|uy\.com|ac|co\.ac|gv\.ac|or\.ac|ac\.ac|af|am|as|at|ac\.at|co\.at|gv\.at|or\.at|asn\.au|com\.au|edu\.au|org\.au|net\.au|id\.au|be|ac\.be|adm\.br|adv\.br|am\.br|arq\.br|art\.br|bio\.br|cng\.br|cnt\.br|com\.br|ecn\.br|eng\.br|esp\.br|etc\.br|eti\.br|fm\.br|fot\.br|fst\.br|g12\.br|gov\.br|ind\.br|inf\.br|jor\.br|lel\.br|med\.br|mil\.br|net\.br|nom\.br|ntr\.br|odo\.br|org\.br|ppg\.br|pro\.br|psc\.br|psi\.br|rec\.br|slg\.br|tmp\.br|tur\.br|tv\.br|vet\.br|zlg\.br|br|ab\.ca|bc\.ca|mb\.ca|nb\.ca|nf\.ca|ns\.ca|nt\.ca|on\.ca|pe\.ca|qc\.ca|sk\.ca|yk\.ca|ca|cc|ac\.cn|com\.cn|edu\.cn|gov\.cn|org\.cn|bj\.cn|sh\.cn|tj\.cn|cq\.cn|he\.cn|nm\.cn|ln\.cn|jl\.cn|hl\.cn|js\.cn|zj\.cn|ah\.cn|gd\.cn|gx\.cn|hi\.cn|sc\.cn|gz\.cn|yn\.cn|xz\.cn|sn\.cn|gs\.cn|qh\.cn|nx\.cn|xj\.cn|tw\.cn|hk\.cn|mo\.cn|cn|cx|cz|de|dk|fo|com\.ec|tm\.fr|com\.fr|asso\.fr|presse\.fr|fr|gf|gs|co\.il|net\.il|ac\.il|k12\.il|gov\.il|muni\.il|ac\.in|co\.in|org\.in|ernet\.in|gov\.in|net\.in|res\.in|is|it|ac\.jp|co\.jp|go\.jp|or\.jp|ne\.jp|ac\.kr|co\.kr|go\.kr|ne\.kr|nm\.kr|or\.kr|li|lt|lu|asso\.mc|tm\.mc|com\.mm|org\.mm|net\.mm|edu\.mm|gov\.mm|ms|nl|no|nu|pl|ro|org\.ro|store\.ro|tm\.ro|firm\.ro|www\.ro|arts\.ro|rec\.ro|info\.ro|nom\.ro|nt\.ro|se|si|com\.sg|org\.sg|net\.sg|gov\.sg|sk|st|tf|ac\.th|co\.th|go\.th|mi\.th|net\.th|or\.th|tm|to|com\.tr|edu\.tr|gov\.tr|k12\.tr|net\.tr|org\.tr|com\.tw|org\.tw|net\.tw|ac\.uk|uk\.com|uk\.net|gb\.com|gb\.net|vg|sh|kz|ch|info|ua|gov|name|pro|ie|hk|com\.hk|org\.hk|net\.hk|edu\.hk|us|tk|cd|by|ad|lv|eu\.lv|bz|es|jp|cl|ag|mobi|eu|co\.nz|org\.nz|net\.nz|maori\.nz|iwi\.nz|io|la|md|sc|sg|vc|tw|travel|my|se|tv|pt|com\.pt|edu\.pt|asia|fi|com\.ve|net\.ve|fi|org\.ve|web\.ve|info\.ve|co\.ve|tel|im|gr|ru|net\.ru|org\.ru|hr|com\.hr|ly|xyz)$/)}function e(t,e){var i=t.charAt(0),r=e.split(i);return i===t?r:r[(t=parseInt(t.substring(1),10))<0?r.length+t:t-1]}function i(t,e){for(var i,r=t.charAt(0),s=e.split("&"),a=[],o={},n=[],l=t.substring(1),c=0,h=s.length;c<h;c++)if((a=s[c].match(/(.*?)=(.*)/))||(a=[s[c],s[c],""]),""!==a[1].replace(/\s/g,"")){if(a[2]=(i=a[2]||"",decodeURIComponent(i.replace(/\+/g," "))),l===a[1])return a[2];(n=a[1].match(/(.*)\[([0-9]+)\]/))?(o[n[1]]=o[n[1]]||[],o[n[1]][n[2]]=a[2]):o[a[1]]=a[2]}return r===t?o:o[l]}return function(r,s){var a,o={};if("tld?"===r)return t();if(!r)return s;if(r=r.toString(),a=s.match(/^mailto:([^\/].+)/))o.protocol="mailto",o.email=a[1];else{if((a=s.match(/(.*?)\/#\!(.*)/))&&(s=a[1]+a[2]),(a=s.match(/(.*?)#(.*)/))&&(o.hash=a[2],s=a[1]),o.hash&&r.match(/^#/))return i(r,o.hash);if((a=s.match(/(.*?)\?(.*)/))&&(o.query=a[2],s=a[1]),o.query&&r.match(/^\?/))return i(r,o.query);if((a=s.match(/(.*?)\:?\/\/(.*)/))&&(o.protocol=a[1].toLowerCase(),s=a[2]),(a=s.match(/(.*?)(\/.*)/))&&(o.path=a[2],s=a[1]),o.path=(o.path||"").replace(/^([^\/])/,"/$1"),r.match(/^[\-0-9]+$/)&&(r=r.replace(/^([^\/])/,"/$1")),r.match(/^\//))return e(r,o.path.substring(1));if((a=e("/-1",o.path.substring(1)))&&(a=a.match(/(.*?)\.([^.]+)$/))&&(o.file=a[0],o.filename=a[1],o.fileext=a[2]),(a=s.match(/(.*)\:([0-9]+)$/))&&(o.port=a[2],s=a[1]),(a=s.match(/(.*?)@(.*)/))&&(o.auth=a[1],s=a[2]),o.auth&&(a=o.auth.match(/(.*)\:(.*)/),o.user=a?a[1]:o.auth,o.pass=a?a[2]:void 0),o.hostname=s.toLowerCase(),"."===r.charAt(0))return e(r,o.hostname);t()&&(a=o.hostname.match(t()))&&(o.tld=a[3],o.domain=a[2]?a[2]+"."+a[3]:void 0,o.sub=a[1]||void 0),o.port=o.port||("https"===o.protocol?"443":"80"),o.protocol=o.protocol||("443"===o.port?"https":"http")}return r in o?o[r]:"{}"===r?o:void 0}}();function c(t,e,i){for(var r in this.args={wx:null,context:null,playerKey:"",id_:"",type:"vod",access_token:"",account_Id:"",aid:"",app_id:""},this.success=e||function(){},this.failure=i||function(){},this.currentHostname="",this.currentPath="",this.vodQuality=[],this.vodUri="",this.dispatchDomain="https://gslb.e.vhall.com",this.isFull=!1,this.currentSrc="",this.currentQuality="same",this.currentTime=0,this.messageTime=0,this.heartbeatTime=0,this.qualityList=["same"],this.viewUrl={},this.subSrc=[],this.streamState={code:0,netStatus:{videoBitrate:0,audioBitrate:0,videoFPS:0,videoGOP:0,netSpeed:0,netJitter:0,videoWidth:0,videoHeight:0}},this._token={token:null,date:0},this.player=null,t)this.args[r]=t[r];if(!this.args.id_)return console.error("need dom id"),void THIS.failure();const s={uid:this.args.account_Id,aid:this.args.aid,url:"https://dc.e.vhall.com/login",biz_role:0,biz_id:0,biz_des01:0,bu:1,vid:this.args.account_Id,app_id:this.args.app_id};n.init(s),this.initialization()}c.prototype.initialization=function(){if("live"===this.args.type)var t="https://api.vhallyun.com/sdk/v1/room/get-watch-info?client=js&package_check=peter&room_id="+this.args.aid+"&app_id="+this.args.app_id+"&third_party_user_id="+this.args.account_Id+"&access_token="+this.args.access_token;else t="https://api.vhallyun.com/sdk/v1/demand/get-record-watch-info?client=js&package_check=peter&record_id="+this.args.aid+"&app_id="+this.args.app_id+"&third_party_user_id="+this.args.account_Id+"&access_token="+this.args.access_token;var e=this;wx.request({url:t,method:"GET",success:function(t){var i=t.data;if(200!==i.code)return console.error("call sdk api failed, code =",i.code),void e.failure();"vod"===e.args.type&&(e.vodQuality=i.data.definition,e.vodUri=i.data.default_server.uri),e.dispatchDomain=i.data.dispatch_server,e.fetchSrc()},fail:function(t){console.error("call sdk api failed!!"),e.failure()}})},c.prototype.updatePlayerSrc=function(t){var e={};e[this.args.playerKey]=t+"?token="+this._token.token,this.args.context.setData(e),"live"===this.args.type?this.player=this.args.wx.createLivePlayerContext(this.args.id_):this.player=this.args.wx.createVideoContext(this.args.id_),this.currentSrc=t,this.currentHostname=l("hostname",t),this.currentPath=l("path",t)},c.prototype.play=function(){this.player.play(),n.startPlayMessageLog(this),n.startPlayHeartLog(this)},c.prototype.stop=function(){this.player.stop(),n.stopPlayMessageLog(),n.stopPlayHeartLog()},c.prototype.inFullScreen=function(){this.isFull||(this.player.requestFullScreen({direction:90}),this.isFull=!0)},c.prototype.outFullScreen=function(){this.isFull&&(this.player.exitFullScreen(),this.isFull=!1)},c.prototype.fetchSrc=function(){var t=this.args.wx;if("live"===this.args.type)var e=this.dispatchDomain+"/api/dispatch_play?webinar_id="+this.args.aid+"&rand="+this.args.rand+"&uid="+this.args.uid;else e=this.dispatchDomain+"/api/dispatch_replay?&webinar_id="+this.args.aid+"&rand="+this.args.rand+"&uid="+this.args.uid+"&uri="+this.vodUri+"&quality="+JSON.stringify(this.vodQuality);var i=this;t.request({url:e,method:"GET",success:function(t){var e=t.data;if("success"===e.msg&&"200"===e.code){var r=e.data,s=r.token,a=(t=>{let e=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],i=-1;for(let r=0;r<t.length;r++)i=i>>>8^e[255&(i^t.charCodeAt(r))];return(-1^i)>>>0})(s.split("_")[0].split("").reverse().join("")).toString(16).toUpperCase()+"_"+s.split("_")[1];"live"===i.args.type?(i.viewUrl=r.httpflv_urls,i.viewUrl.keyWords="httpflv_url"):r.hls_domainnames?(i.viewUrl=r.hls_domainnames,i.viewUrl.keyWords="hls_domainname"):(i.viewUrl=r.mp4_domainnames,i.viewUrl.keyWords="mp4_domainname"),function(t){for(var e in i.qualityList=[],i.viewUrl)"object"==typeof i.viewUrl[e]&&i.qualityList.push(e);i.qualityList.sort((function(t,e){return"same"===t?-1:"same"===e?1:"a"===t?1:"a"===e?-1:t<e?1:0}));var r="same";if(-1===i.qualityList.indexOf(r)){var s=["same","720p","480p","360p","a"];for(var a in s)if(-1!==i.qualityList.indexOf(s[a])){r=s[a];break}}i.subSrc=[];for(var o=0,n=i.viewUrl[r].length;o<n;o++)i.subSrc.push(i.viewUrl[r][o][i.viewUrl.keyWords]);i.subSrcMaxIndex=i.subSrc.length-1,i.subSrcIndex=0,i.currentQuality=r}(),i._token={token:a,date:(new Date).getTime()},i.updatePlayerSrc(i.subSrc[0]),i.success()}else console.error("The playback address request failed.",e)},fail:function(t){console.error("The playback address request failed!",t),i.failure()}})},c.prototype.switchSrc=function(){if(!(this.subSrcMaxIndex<=0)){this.subSrcIndex>=this.subSrcMaxIndex?this.subSrcIndex=0:this.subSrcIndex++;var t=this.subSrc[this.subSrcIndex];return this.updatePlayerSrc(t),this.play(),t}console.error("current Src length <= 1, so can not switch src")},c.prototype.getQualityList=function(){return this.qualityList},c.prototype.getCurrentQuality=function(){return this.currentQuality},c.prototype.switchQualityLevel=function(t,e){var i=this.viewUrl[t];if(i){this.subSrc=[];for(var r=0,s=i.length;r<s;r++)this.subSrc.push(i[r][this.viewUrl.keyWords]);var a=this;this.subSrcMaxIndex=this.subSrc.length-1,this.subSrcIndex=0,this.currentQuality=t,"live"===this.args.type&&!0===this.isFull?this.player.exitFullScreen({complete:function(){a.updatePlayerSrc(a.subSrc[0]),a.player.requestFullScreen({direction:90})}}):this.updatePlayerSrc(this.subSrc[0]),"vod"===this.args.type&&e&&this.args.context.setData({initTime:e}),this.play()}else console.error("no this quality")},c.prototype.onNetStatus=function(t){this.streamState.netStatus.videoBitrate=t.detail.info.videoBitrate?t.detail.info.videoBitrate:this.streamState.netStatus.videoBitrate,this.streamState.netStatus.audioBitrate=t.detail.info.audioBitrate?t.detail.info.audioBitrate:this.streamState.netStatus.audioBitrate,this.streamState.netStatus.videoFPS=t.detail.info.videoFPS?t.detail.info.videoFPS:this.streamState.netStatus.videoFPS,this.streamState.netStatus.videoGOP=t.detail.info.videoGOP?t.detail.info.videoGOP:this.streamState.netStatus.videoGOP,this.streamState.netStatus.netSpeed=t.detail.info.netSpeed?t.detail.info.netSpeed:this.streamState.netStatus.netSpeed,this.streamState.netStatus.netJitter=t.detail.info.netJitter?t.detail.info.netJitter:this.streamState.netStatus.netJitter,this.streamState.netStatus.videoWidth=t.detail.info.videoWidth?t.detail.info.videoWidth:this.streamState.netStatus.videoWidth,this.streamState.netStatus.videoHeight=t.detail.info.videoHeight?t.detail.info.videoHeight:this.streamState.netStatus.videoHeight},c.prototype.onTimeUpdata=function(t){this.currentTime=t.detail.currentTime};e.default={videoJs:c}}]).default}));
//# sourceMappingURL=vhall-mpsdk-player-0.1.5.js.map